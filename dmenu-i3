#!/usr/bin/python

import i3
import subprocess

nodes = i3.filter(nodes=[])
windows = []
[windows.append(i['name'].replace(" ", "_").encode('ascii', 'ignore')) for i in nodes]

targets = "\n".join(sorted(windows))

dmenu = subprocess.Popen([
    'dmenu', '-i',
    '-p', 'window: '
    ], stdin=subprocess.PIPE, stdout=subprocess.PIPE)
target = dmenu.communicate(input=targets)[0]

selection = 0
for i in nodes:
    if target == i['name'].replace(" ", "_").encode('ascii', 'ignore'):
        selection = i['window']
        break

if selection is not 0:
    i3.focus(id=selection)
